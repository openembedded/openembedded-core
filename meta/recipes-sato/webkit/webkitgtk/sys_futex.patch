From 5a82a729903fcd6943334c160838a143dc9a3b3c Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Wed, 18 Dec 2024 20:24:22 -0800
Subject: [PATCH] Fix build on newer 32bit architectures with only 64bit time_t

Upstream-Status: Submitted [https://chromium-review.googlesource.com/c/angle/angle/+/6108397]
Signed-off-by: Khem Raj <raj.khem@gmail.com>
---
 Source/ThirdParty/ANGLE/src/common/SimpleMutex.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/Source/ThirdParty/ANGLE/src/common/SimpleMutex.cpp b/Source/ThirdParty/ANGLE/src/common/SimpleMutex.cpp
index 4ed0af51..11feda6c 100644
--- a/Source/ThirdParty/ANGLE/src/common/SimpleMutex.cpp
+++ b/Source/ThirdParty/ANGLE/src/common/SimpleMutex.cpp
@@ -17,6 +17,9 @@
 #        include <linux/futex.h>
 #        include <sys/syscall.h>
 #        include <unistd.h>
+#        if !defined(SYS_futex) && defined(SYS_futex_time64)
+#           define SYS_futex SYS_futex_time64
+#        endif
 #    endif  // defined(ANGLE_PLATFORM_LINUX) || defined(ANGLE_PLATFORM_ANDROID)
 
 #    if defined(ANGLE_PLATFORM_WINDOWS)
